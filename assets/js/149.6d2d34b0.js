(window.webpackJsonp=window.webpackJsonp||[]).push([[149],{436:function(t,r,a){"use strict";a.r(r);var e=a(2),s=Object(e.a)({},function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("想通了一件事情"),a("br")]),t._v(" "),a("h3",{attrs:{id:"前情提要"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前情提要","aria-hidden":"true"}},[t._v("#")]),t._v(" 前情提要")]),t._v(" "),a("p",[t._v("1.通过了解浏览器线程的一些知识我们知道浏览器进程中GUI线程是与JS引擎线程互斥的。"),a("br"),t._v("\n2.小程序的架构是JsCore执行js逻辑代码+webview页面渲染双线程，两个线程并不互斥。")]),t._v(" "),a("h3",{attrs:{id:"那么问题来了"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#那么问题来了","aria-hidden":"true"}},[t._v("#")]),t._v(" 那么问题来了")]),t._v(" "),a("p",[t._v("为什么浏览器中js代码会阻塞页面渲染而小程序环境里面JS却可以和页面渲染同时进行。"),a("br"),t._v("\n*GUI线程被设计成是和JS引擎线程互斥的(谷歌浏览器为例)"),a("br"),t._v("\n*小程序逻辑层线程和webview渲染线程是可以同时执行的")]),t._v(" "),a("h3",{attrs:{id:"原因"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原因","aria-hidden":"true"}},[t._v("#")]),t._v(" 原因")]),t._v(" "),a("ul",[a("li",[t._v("浏览器环境")])]),t._v(" "),a("p",[t._v("由于JavaScript是可操纵DOM的，如果在修改这些元素属性同时渲染界面（即JS线程和GUI线程同时运行），那么渲染线程前后获得的元素数据就可能不一致了")]),t._v(" "),a("ul",[a("li",[t._v("小程序环境")])]),t._v(" "),a("p",[t._v("小程序底层屏蔽了窗口对象(JsCore环境是没有窗口对象的)，小程序里的JS代码是无法操作document对象的，也就无法改变dom树的结构，不会出现前后不一致的问题。")]),t._v(" "),a("p",[t._v("附:"),a("br"),t._v("\nJsCore示意图"),a("br"),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"JsCore",href:"/images/jscore.png"}},[a("img",{staticStyle:{width:"40%",display:"block"},attrs:{src:"/images/jscore.png"}})])])])},[],!1,null,null,null);r.default=s.exports}}]);