(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{438:function(e,t,n){"use strict";n.r(t);var r=n(2),a=Object(r.a)({},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("p",[e._v("思路分享：判断是否是历史用户(适用于用户数据迁移)"),n("br")]),e._v(" "),n("p",[e._v("做过微信系产品开发的同学都知道"),n("router-link",{attrs:{to:"/blog/wx_account_sys.html"}},[e._v("微信有一套账户体系")]),e._v("。")],1),e._v(" "),n("p",[e._v("用户在每个应用都有一个openid，如果想打通账号体系就必须注册微信开放平台，关联公众号或者小程序才能获取unionid来唯一区分用户。")]),e._v(" "),n("p",[e._v("当然根据"),n("a",{attrs:{href:"https://mp.weixin.qq.com/s?biz=MzI3OTA0NDQ3NQ==&mid=2247485152&idx=1&sn=952cf1b7d578cc8bcdea85b04a233f9a&chksm=eb4c8ef4dc3b07e2e4820ea4b0a88cb1986d20dd1fae356e862f0a4433d76d749f3ff712d751&scene=21&token=1590658044&lang=zhCN#wechatredirect",target:"_blank",rel:"noopener noreferrer"}},[e._v("最新的规范"),n("OutboundLink")],1),e._v("已经不需要去开放平台关联应用了，直接可以拿到unionid。")]),e._v(" "),n("p",[e._v("那么如果在无法获取unionid的情况："),n("br"),e._v("\n举个例子：因为某些限制，新产品必须以新主体注册挂靠。"),n("br"),e._v("\n这时，如果已经有历史用户数据(比如基于公众号的某一业务)，怎么去判断一个新用户(例如小程序用户)是同一用户呢？")]),e._v(" "),n("p",[e._v("这里提供一个暴力的方法："),n("br"),e._v(" "),n("strong",[e._v("就是根据用户的头像以及昵称来判断。")])]),e._v(" "),n("p",[e._v("这里首先说明一下，同一个用户如果注册使用不同主体的小程序，虽然头像一样但是返回用户信息里头像的url是不同的(有兴趣的可以自己去验证一下)。")]),e._v(" "),n("p",[e._v("拿到用户的头像及昵称之后可以进行如下的判断")]),e._v(" "),n("ul",[n("li",[e._v("看用户昵称是否相同")]),e._v(" "),n("li",[e._v("头像相似度是否达到98%以上")])]),e._v(" "),n("p",[e._v("如果二者都满足的话那么基本可以判断是同一用户了，但是这个方法只适用于短期内的用户数据迁移，如果时间过久，用户会修改自己的基本信息，那时会降低准确性，毕竟信息是有时效性的。")]),e._v(" "),n("h3",{attrs:{id:"参考资料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[e._v("#")]),e._v(" 参考资料")]),e._v(" "),n("ul",[n("li",[n("router-link",{attrs:{to:"/blog/wx_account_sys.html"}},[e._v("微信账户体系知识分享")])],1),e._v(" "),n("li",[n("a",{attrs:{href:"https://mp.weixin.qq.com/s?biz=MzI3OTA0NDQ3NQ==&mid=2247485152&idx=1&sn=952cf1b7d578cc8bcdea85b04a233f9a&chksm=eb4c8ef4dc3b07e2e4820ea4b0a88cb1986d20dd1fae356e862f0a4433d76d749f3ff712d751&scene=21&token=1590658044&lang=zhCN#wechatredirect",target:"_blank",rel:"noopener noreferrer"}},[e._v("小程序登录、用户信息相关接口调整说明"),n("OutboundLink")],1)])])])},[],!1,null,null,null);t.default=a.exports}}]);