(window.webpackJsonp=window.webpackJsonp||[]).push([[198],{484:function(t,e,r){"use strict";r.r(e);var a=r(2),n=Object(a.a)({},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("p",[t._v("最近在做PC二维码扫码登录的功能，总结了一些问题"),r("br")]),t._v(" "),r("h3",{attrs:{id:"主要区别"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#主要区别","aria-hidden":"true"}},[t._v("#")]),t._v(" 主要区别")]),t._v(" "),r("p",[t._v("二者的主要区别:")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("差异")]),t._v(" "),r("th",[t._v("PC网页扫码登录")]),t._v(" "),r("th",[t._v("公众号网页授权登录")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("账号要求")]),t._v(" "),r("td",[t._v("需要开放平台账号创建网站应用")]),t._v(" "),r("td",[t._v("一个认证过的服务号就可以(也可以使用公众号的测试号)")])]),t._v(" "),r("tr",[r("td",[t._v("授权方式")]),t._v(" "),r("td",[t._v("在页面打开公众号二维码之后授权")]),t._v(" "),r("td",[t._v("公众号内打开授权链接(不关注公众号也可以)")])]),t._v(" "),r("tr",[r("td",[t._v("授权环境")]),t._v(" "),r("td",[t._v("PC浏览器网页")]),t._v(" "),r("td",[t._v("微信客户端")])]),t._v(" "),r("tr",[r("td",[t._v("测试号")]),t._v(" "),r("td",[t._v("无")]),t._v(" "),r("td",[t._v("有(可以申请使用测试账号)")])])])]),t._v(" "),r("p",[t._v("两者的授权流程一样，需要授权获取code换取token和openid再去请求用户信息")]),t._v(" "),r("blockquote",[r("p",[t._v("PC端扫码还有一种方式(本质上还是网页授权的方式)"),r("br"),t._v("\nPC端扫的二维码地址是移动端的网页，手机扫码后打开的是网页授权链接，通过网页授权的方式获取code拿到用户openid或者unionid，PC端通过轮询方式获取用户id进行登录")])]),t._v(" "),r("h3",{attrs:{id:"授权原理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#授权原理","aria-hidden":"true"}},[t._v("#")]),t._v(" 授权原理")]),t._v(" "),r("p",[t._v("授权原理简述:"),r("br"),t._v("\n用户通过手机微信确认登录之后，微信方会返回一个授权码code给回第三方（接入方），这个授权码code一次有效期，且有效时间比较短；第三方通过此code去调用微信接口获取token，token的有效期也比较短，当然用户可以通过刷新token的方式来延长token的有效时长；第三步通过token再去调用微信开发平台接口，获取微信个人用户信息")]),t._v(" "),r("blockquote",[r("p",[t._v("微信OAuth2.0授权登录官方说明")])]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("1. 第三方发起微信授权登录请求，微信用户允许授权第三方应用后，微信会拉起应用或重定向到第三方网站，并且带上授权临时票据code参数；\n2. 通过code参数加上AppID和AppSecret等，通过API换取access_token；\n3. 通过access_token进行接口调用，获取用户基本数据资源或帮助用户实现基本操作\n")])])]),r("img",{attrs:{src:"/images/auth2.0.png",width:"100%"}}),t._v(" "),r("h3",{attrs:{id:"参考资料"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://mp.weixin.qq.com/debug/cgi-bin/sandboxinfo?action=showinfo&t=sandbox/index",target:"_blank",rel:"noopener noreferrer"}},[t._v("微信公众平台测试帐号申请地址"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("微信公众号网页授权"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://developers.weixin.qq.com/doc/oplatform/Website_App/WeChat_Login/Wechat_Login.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("微信开放平台网站应用微信登录开发指南"),r("OutboundLink")],1)])])])},[],!1,null,null,null);e.default=n.exports}}]);